<%# Partial for rendering a single deck %>
<% const title = deckId.charAt(0).toUpperCase() + deckId.slice(1); %>
<%# Determine initial image: card back if draw pile > 0, otherwise empty or a placeholder %>
<% const initialImageHTML = deckState.drawPileCount > 0 ? `<img src="${cardBackImg}" alt="Deck" class="card-image">` : '<span>Empty</span>'; %>

<div class="deck" id="deck-<%= deckId %>" data-deck-id="<%= deckId %>">
    <h2><%= title %></h2>

    <div class="deck-piles">
        <div class="pile combined-pile">
            <div class="pile-counters">
                <strong>Draw (<span id="draw-count-<%= deckId %>"><%= deckState.drawPileCount %></span>)</strong>
                <button data-action="shuffle"><img class="icon" src="/public/imgs/shuffle.png"></button>
                <strong>Discard (<span id="discard-count-<%= deckId %>"><%= deckState.discardPileCount %></span>)</strong>
            </div>
            <div class="card-display" id="combined-card-display-<%= deckId %>" data-action="draw">
                <%- initialImageHTML %>
            </div>
        </div>
    </div>

    <% if (deckState.type === 'player' || deckState.type === 'monster') { %>
     <div class="status-indicators">
        <div class="bless" id="bless-status-<%= deckId %>">Blessings: <%= deckState.activeBlessings %></div>
        <button data-action="bless">+</button>
        <button data-action="removeBless">-</button>
        <div class="curse" id="curse-status-<%= deckId %>">Curses: <%= deckState.activeCurses %></div>
        <button data-action="curse">+</button>
        <button data-action="removeCurse">-</button>
     </div>
    <% } %>


    <% if (deckId.startsWith('player')) { %>
        <div class="controls-player">
            <button class="delete-player-button" data-deck-id="<%= deckId %>">Delete Player</button>
        </div>
    <% } %>
</div>
